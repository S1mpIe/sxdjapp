<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.finals.sxdj.repository.FarmerMapper">
    <resultMap id="Farmer" type="Farmers" autoMapping="true"/>
    <resultMap id="Goods" type="GoodsData" autoMapping="true">

    </resultMap>
    <select id="queryAllFarmers" resultMap="Farmer" >
        select * from farmers
    </select>
    <select id="queryAllSold" resultMap="GoodsData">
        select g.id as id,
               g.image_address as imageUrl,
               g.name as name,
               g.category as category,
               f.name as origin,
               (gn.number-gn.sale_number) as number,
               gn.unit as numberUnit,
               gp.number as price,
               gp.unti as priceUnit
        from     goods g
                 left join farmers f on f.id=g.origin_id
                 left join goods_number gn on gn.goods_id=g.id
                 left join goods_price gp on gp.goods_id=g.id
        where f.id=#{farmerId} and rg.if_on=1 and g.if_delete=0
    </select>
</mapper>